#summary Installing EMC2 in a VirtualBox virtual machine

= Introduction =

This exercise is a part of the Sector67 [EMC2IntegrationClass].  In this exercise you will create a virtual EMC2 instance using !VirtualBox and the EMC2 live CD.

!VirtualBox is open source virtualization software, much like !VMWare Workstation or Parallels.

This virtual EMC2 instance will be used during the class to obtain familiarity with the EMC2 installation process, EMC2 configuration, the various user interfaces and to practice creation of integrations such as custom user space components and classic ladder programs.

= Details =
== Pre-requisite software ==
You will need the following software:

A !VirtualBox install appropriate for your PC, available from [https://www.virtualbox.org/wiki/Downloads the VirtualBox site].  This example uses !VirtualBox 4.1.6.

The EMC2 Ubuntu 10.04 live CD iso image, available from [http://www.linuxcnc.org/ the EMC2 site]

== Virtual machine creation ==
After following the installation instructions for your platform, start !VirtualBox and run "Machine->New...".  This should start the new virtual machine wizard.  Click "Next" to continue.  You will then need to choose a name for your virtual machine, such as "EMC2Sandbox".  For the "Operating System" and "Version" choose "Linux" and "Ubuntu".  Click "Next".  

For the base memory size, you can choose 256MB.  For the Start-up disk, choose to create a new hard disk, choose the VDI type disk and click "Next".  A dynamically allocated disk will be fine for our EMC2 sandbox.  The default Location and 4 GB should be sufficient for the hard disk size.  Click "Next" to continue to installation wizard, and click "Create" to create the virtual machine.

== Installing EMC2 ==
After the virtual machine is created, we'll need to configure it to boot from the EMC2 live CD iso image.  An actual burned CD is not necessary, but could alternatively be used for the installation (but would be significantly slower).

With your virtual machine instance highlighted, click "Settings".  Under the "storage" tab, select the "Empty" CD icon under the "IDE Controller" and click the CD icon on the far right to set up the CD/DVD drive.  If installing from an iso image, select "Choose a virtual CD/DVD disk file..." and browse to the location of your live CD and choose the .iso file.  Click OK and 

Then click "Start" to start the virtual machine.  You may see a couple of warnings and should then see the Ubuntu boot process.

We'll use the live CD to install a local copy, which is the same process that would be used for a real mill.

== Install Virtual Machine extensions ==
The Linux virtual machine functions significantly better with guest extensions installed.  

"Devices->Install Guest Additions..."

== Updating EMC2 ==
Since there are many fixes available to the current live CD version of EMC2 (2.4.3), updating is recommended.  The updated procedure can be found at:

[http://buildbot.linuxcnc.org/]

We are using Lucid (Ubuntu 10.4) "(32-bit only), realtime", and should update the 2.4 branch for now.  We are not running the pure simulation, but rather the real time system virtualized.  This will of course not really work for real time operations, but suits our purposes well.  Updating requires adding the following to the /etc/apt/sources.list.d/emc2-buildbot.list file:

{{{
deb     http://buildbot.linuxcnc.org/ lucid v2.4_branch-rt
deb-src http://buildbot.linuxcnc.org/ lucid v2.4_branch-rt
}}}

and then running:

{{{
sudo apt-get update
sudo apt-get install emc2
}}}

== Linux customizations ==
During install you hopefully chose to have the user logged in automatically.  It is also convenient and safer to have the screen saver not lock the machine and of course to not put the machine to sleep after an idle period of time.  This is done via:

TODO: get

== Starting a machine simulation ==
You should now be ready to start playing with EMC2 in earnest.  In the base install there are 